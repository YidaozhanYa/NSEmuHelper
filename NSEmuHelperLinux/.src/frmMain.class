' Gambas class file


Public Sub Form_Open()
Me.hide
    Me.Title = "NS 模拟器助手 " & Application.version
    '加载配置
    Gl.YuzuInstallFolder = Settings["Folder/YuzuInstallFolder", "~/.local/share/nsemuhelper/yuzu"]
    Gl.RyujinxInstallFolder = Settings["Folder/RyujinxInstallFolder", "~/.local/share/nsemuhelper/ryujinx"]
    Gl.AlwaysUseCloudFlare = Settings["Network/AlwaysUseCloudFlare", 0]
    Gl.CloudFlareReverseProxyUrl = Settings["Network/CloudFlareReverseProxyUrl", "https://rp.ydz1.gq"]
    Gl.DownloadSource = Settings["Network/DownloadSource", "Aliyundrive"]
    Gl.AliyundriveDomain = Settings["Network/AliyundriveDomain", "nsemuhelper.herokuapp.com"]
    Gl.AutoCheckForUpdate = Settings["Tool/AutoCheckForUpdate", 0]
    '界面
    Label3.Text &= " " & Application.version
    If Not Exist("/usr/bin/gamemoderun") Then Message.Warning("建议您先安装 gamemode 包，使用它可以提高 NS 模拟器的运行效率。")
    Me.show
    
End

Public Sub picConfig_MouseDown()
    Me.hide
    frmConfig.show
End

Public Sub picYuzu_MouseDown()
    If Not Exist(gl.YuzuInstallFolder & "/yuzu") Then 
        Select Case (Message.question("在指定安装路径中，Yuzu 模拟器还未安装，是否立即开始安装？", "是", "否"))
            Case 1
            Me.hide
            frmYuzuInstaller.InstallMode = 1
            frmYuzuInstaller.Show
        End Select
    Else 
        Me.hide
        frmYuzuManage.show
    Endif
End

Public Sub picRyujinx_MouseDown()
    If Not Exist(gl.RyujinxInstallFolder & "/Ryujinx") Then 
        Select Case (Message.question("在指定安装路径中，Ryujinx 模拟器还未安装，是否立即开始安装？", "是", "否"))
            Case 1
            Me.hide
            frmRyujinxInstaller.InstallMode = 1
            frmRyujinxInstaller.Show
        End Select
    Else 
        Me.hide
        frmRyujinxManage.show
    Endif
End
